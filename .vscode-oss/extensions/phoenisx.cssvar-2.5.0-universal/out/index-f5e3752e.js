"use strict";var ie=require("./extension-44554eae.js"),b=require("path"),C=require("fs"),O=require("util"),se=require("module"),Ee=require("url");require("vscode"),require("os"),require("stream"),require("events"),require("tty"),require("http"),require("https"),require("zlib");function Ae(r){if(r&&r.__esModule)return r;var e=Object.create(null);return r&&Object.keys(r).forEach(function(t){if(t!=="default"){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}}),e.default=r,Object.freeze(e)}var F="(".charCodeAt(0),B=")".charCodeAt(0),z="'".charCodeAt(0),V='"'.charCodeAt(0),Q="\\".charCodeAt(0),E="/".charCodeAt(0),J=",".charCodeAt(0),K=":".charCodeAt(0),T="*".charCodeAt(0),$e="u".charCodeAt(0),Se="U".charCodeAt(0),je="+".charCodeAt(0),Oe=/^[a-f0-9?-]+$/i,Ie=function(r){for(var e=[],t=r,n,i,o,s,a,l,h,f,c=0,u=t.charCodeAt(c),p=t.length,y=[{nodes:e}],w=0,g,S="",j="",_="";c<p;)if(u<=32){n=c;do n+=1,u=t.charCodeAt(n);while(u<=32);s=t.slice(c,n),o=e[e.length-1],u===B&&w?_=s:o&&o.type==="div"?(o.after=s,o.sourceEndIndex+=s.length):u===J||u===K||u===E&&t.charCodeAt(n+1)!==T&&(!g||g&&g.type==="function"&&g.value!=="calc")?j=s:e.push({type:"space",sourceIndex:c,sourceEndIndex:n,value:s}),c=n}else if(u===z||u===V){n=c,i=u===z?"'":'"',s={type:"string",sourceIndex:c,quote:i};do if(a=!1,n=t.indexOf(i,n+1),~n)for(l=n;t.charCodeAt(l-1)===Q;)l-=1,a=!a;else t+=i,n=t.length-1,s.unclosed=!0;while(a);s.value=t.slice(c+1,n),s.sourceEndIndex=s.unclosed?n:n+1,e.push(s),c=n+1,u=t.charCodeAt(c)}else if(u===E&&t.charCodeAt(c+1)===T)n=t.indexOf("*/",c),s={type:"comment",sourceIndex:c,sourceEndIndex:n+2},n===-1&&(s.unclosed=!0,n=t.length,s.sourceEndIndex=n),s.value=t.slice(c+2,n),e.push(s),c=n+2,u=t.charCodeAt(c);else if((u===E||u===T)&&g&&g.type==="function"&&g.value==="calc")s=t[c],e.push({type:"word",sourceIndex:c-j.length,sourceEndIndex:c+s.length,value:s}),c+=1,u=t.charCodeAt(c);else if(u===E||u===J||u===K)s=t[c],e.push({type:"div",sourceIndex:c-j.length,sourceEndIndex:c+s.length,value:s,before:j,after:""}),j="",c+=1,u=t.charCodeAt(c);else if(F===u){n=c;do n+=1,u=t.charCodeAt(n);while(u<=32);if(f=c,s={type:"function",sourceIndex:c-S.length,value:S,before:t.slice(f+1,n)},c=n,S==="url"&&u!==z&&u!==V){n-=1;do if(a=!1,n=t.indexOf(")",n+1),~n)for(l=n;t.charCodeAt(l-1)===Q;)l-=1,a=!a;else t+=")",n=t.length-1,s.unclosed=!0;while(a);h=n;do h-=1,u=t.charCodeAt(h);while(u<=32);f<h?(c!==h+1?s.nodes=[{type:"word",sourceIndex:c,sourceEndIndex:h+1,value:t.slice(c,h+1)}]:s.nodes=[],s.unclosed&&h+1!==n?(s.after="",s.nodes.push({type:"space",sourceIndex:h+1,sourceEndIndex:n,value:t.slice(h+1,n)})):(s.after=t.slice(h+1,n),s.sourceEndIndex=n)):(s.after="",s.nodes=[]),c=n+1,s.sourceEndIndex=s.unclosed?n:c,u=t.charCodeAt(c),e.push(s)}else w+=1,s.after="",s.sourceEndIndex=c+1,e.push(s),y.push(s),e=s.nodes=[],g=s;S=""}else if(B===u&&w)c+=1,u=t.charCodeAt(c),g.after=_,g.sourceEndIndex+=_.length,_="",w-=1,y[y.length-1].sourceEndIndex=c,y.pop(),g=y[w],e=g.nodes;else{n=c;do u===Q&&(n+=1),n+=1,u=t.charCodeAt(n);while(n<p&&!(u<=32||u===z||u===V||u===J||u===K||u===E||u===F||u===T&&g&&g.type==="function"&&g.value==="calc"||u===E&&g.type==="function"&&g.value==="calc"||u===B&&w));s=t.slice(c,n),F===u?S=s:($e===s.charCodeAt(0)||Se===s.charCodeAt(0))&&je===s.charCodeAt(1)&&Oe.test(s.slice(2))?e.push({type:"unicode-range",sourceIndex:c,sourceEndIndex:n,value:s}):e.push({type:"word",sourceIndex:c,sourceEndIndex:n,value:s}),c=n}for(c=y.length-1;c;c-=1)y[c].unclosed=!0,y[c].sourceEndIndex=t.length;return y[0].nodes},oe=function r(e,t,n){var i,o,s,a;for(i=0,o=e.length;i<o;i+=1)s=e[i],n||(a=t(s,i,e)),a!==!1&&s.type==="function"&&Array.isArray(s.nodes)&&r(s.nodes,t,n),n&&t(s,i,e)};function ae(r,e){var t=r.type,n=r.value,i,o;return e&&(o=e(r))!==void 0?o:t==="word"||t==="space"?n:t==="string"?(i=r.quote||"",i+n+(r.unclosed?"":i)):t==="comment"?"/*"+n+(r.unclosed?"":"*/"):t==="div"?(r.before||"")+n+(r.after||""):Array.isArray(r.nodes)?(i=ue(r.nodes,e),t!=="function"?i:n+"("+(r.before||"")+i+(r.after||"")+(r.unclosed?"":")")):n}function ue(r,e){var t,n;if(Array.isArray(r)){for(t="",n=r.length-1;~n;n-=1)t=ae(r[n],e)+t;return t}return ae(r,e)}var le=ue,M="-".charCodeAt(0),U="+".charCodeAt(0),G=".".charCodeAt(0),Re="e".charCodeAt(0),Le="E".charCodeAt(0);function ke(r){var e=r.charCodeAt(0),t;if(e===U||e===M){if(t=r.charCodeAt(1),t>=48&&t<=57)return!0;var n=r.charCodeAt(2);return t===G&&n>=48&&n<=57}return e===G?(t=r.charCodeAt(1),t>=48&&t<=57):e>=48&&e<=57}var Ne=function(r){var e=0,t=r.length,n,i,o;if(t===0||!ke(r))return!1;for(n=r.charCodeAt(e),(n===U||n===M)&&e++;e<t&&(n=r.charCodeAt(e),!(n<48||n>57));)e+=1;if(n=r.charCodeAt(e),i=r.charCodeAt(e+1),n===G&&i>=48&&i<=57)for(e+=2;e<t&&(n=r.charCodeAt(e),!(n<48||n>57));)e+=1;if(n=r.charCodeAt(e),i=r.charCodeAt(e+1),o=r.charCodeAt(e+2),(n===Re||n===Le)&&(i>=48&&i<=57||(i===U||i===M)&&o>=48&&o<=57))for(e+=i===U||i===M?3:2;e<t&&(n=r.charCodeAt(e),!(n<48||n>57));)e+=1;return{number:r.slice(0,e),unit:r.slice(e)}};function x(r){return this instanceof x?(this.nodes=Ie(r),this):new x(r)}x.prototype.toString=function(){return Array.isArray(this.nodes)?le(this.nodes):""},x.prototype.walk=function(r,e){return oe(this.nodes,r,e),this},x.unit=Ne,x.walk=oe,x.stringify=le;var Pe=x,_e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ze(r){for(var e=0,t=0,n=0,i=0,o="",s=0;s<r.length;s++){var a=r[s];if(s>0&&(o+=";"),a.length!==0){for(var l=0,h=[],f=0,c=a;f<c.length;f++){var u=c[f],p=I(u[0]-l);l=u[0],u.length>1&&(p+=I(u[1]-e)+I(u[2]-t)+I(u[3]-n),e=u[1],t=u[2],n=u[3]),u.length===5&&(p+=I(u[4]-i),i=u[4]),h.push(p)}o+=h.join(",")}}return o}function I(r){var e="";r=r<0?-r<<1|1:r<<1;do{var t=r&31;r>>>=5,r>0&&(t|=32),e+=_e[t]}while(r>0);return e}var q=function r(e){this.bits=e instanceof r?e.bits.slice():[]};q.prototype.add=function(e){this.bits[e>>5]|=1<<(e&31)},q.prototype.has=function(e){return!!(this.bits[e>>5]&1<<(e&31))};var v=function(e,t,n){this.start=e,this.end=t,this.original=n,this.intro="",this.outro="",this.content=n,this.storeName=!1,this.edited=!1,Object.defineProperties(this,{previous:{writable:!0,value:null},next:{writable:!0,value:null}})};v.prototype.appendLeft=function(e){this.outro+=e},v.prototype.appendRight=function(e){this.intro=this.intro+e},v.prototype.clone=function(){var e=new v(this.start,this.end,this.original);return e.intro=this.intro,e.outro=this.outro,e.content=this.content,e.storeName=this.storeName,e.edited=this.edited,e},v.prototype.contains=function(e){return this.start<e&&e<this.end},v.prototype.eachNext=function(e){for(var t=this;t;)e(t),t=t.next},v.prototype.eachPrevious=function(e){for(var t=this;t;)e(t),t=t.previous},v.prototype.edit=function(e,t,n){return this.content=e,n||(this.intro="",this.outro=""),this.storeName=t,this.edited=!0,this},v.prototype.prependLeft=function(e){this.outro=e+this.outro},v.prototype.prependRight=function(e){this.intro=e+this.intro},v.prototype.split=function(e){var t=e-this.start,n=this.original.slice(0,t),i=this.original.slice(t);this.original=n;var o=new v(e,this.end,i);return o.outro=this.outro,this.outro="",this.end=e,this.edited?(o.edit("",!1),this.content=""):this.content=n,o.next=this.next,o.next&&(o.next.previous=o),o.previous=this,this.next=o,o},v.prototype.toString=function(){return this.intro+this.content+this.outro},v.prototype.trimEnd=function(e){if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;var t=this.content.replace(e,"");if(t.length)return t!==this.content&&this.split(this.start+t.length).edit("",void 0,!0),!0;if(this.edit("",void 0,!0),this.intro=this.intro.replace(e,""),this.intro.length)return!0},v.prototype.trimStart=function(e){if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;var t=this.content.replace(e,"");if(t.length)return t!==this.content&&(this.split(this.end-t.length),this.edit("",void 0,!0)),!0;if(this.edit("",void 0,!0),this.outro=this.outro.replace(e,""),this.outro.length)return!0};var X=function(){throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")};typeof window!="undefined"&&typeof window.btoa=="function"?X=function(r){return window.btoa(unescape(encodeURIComponent(r)))}:typeof Buffer=="function"&&(X=function(r){return Buffer.from(r,"utf-8").toString("base64")});var Y=function(e){this.version=3,this.file=e.file,this.sources=e.sources,this.sourcesContent=e.sourcesContent,this.names=e.names,this.mappings=ze(e.mappings)};Y.prototype.toString=function(){return JSON.stringify(this)},Y.prototype.toUrl=function(){return"data:application/json;charset=utf-8;base64,"+X(this.toString())};function Te(r){var e=r.split(`
`),t=e.filter(function(o){return/^\t+/.test(o)}),n=e.filter(function(o){return/^ {2,}/.test(o)});if(t.length===0&&n.length===0)return null;if(t.length>=n.length)return"	";var i=n.reduce(function(o,s){var a=/^ +/.exec(s)[0].length;return Math.min(a,o)},1/0);return new Array(i+1).join(" ")}function Me(r,e){var t=r.split(/[/\\]/),n=e.split(/[/\\]/);for(t.pop();t[0]===n[0];)t.shift(),n.shift();if(t.length)for(var i=t.length;i--;)t[i]="..";return t.concat(n).join("/")}var Ue=Object.prototype.toString;function qe(r){return Ue.call(r)==="[object Object]"}function ce(r){for(var e=r.split(`
`),t=[],n=0,i=0;n<e.length;n++)t.push(i),i+=e[n].length+1;return function(s){for(var a=0,l=t.length;a<l;){var h=a+l>>1;s<t[h]?l=h:a=h+1}var f=a-1,c=s-t[f];return{line:f,column:c}}}var W=function(e){this.hires=e,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null};W.prototype.addEdit=function(e,t,n,i){if(t.length){var o=[this.generatedCodeColumn,e,n.line,n.column];i>=0&&o.push(i),this.rawSegments.push(o)}else this.pending&&this.rawSegments.push(this.pending);this.advance(t),this.pending=null},W.prototype.addUneditedChunk=function(e,t,n,i,o){for(var s=t.start,a=!0;s<t.end;)(this.hires||a||o.has(s))&&this.rawSegments.push([this.generatedCodeColumn,e,i.line,i.column]),n[s]===`
`?(i.line+=1,i.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,a=!0):(i.column+=1,this.generatedCodeColumn+=1,a=!1),s+=1;this.pending=null},W.prototype.advance=function(e){if(!!e){var t=e.split(`
`);if(t.length>1){for(var n=0;n<t.length-1;n++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=t[t.length-1].length}};var R=`
`,A={insertLeft:!1,insertRight:!1,storeName:!1},d=function(e,t){t===void 0&&(t={});var n=new v(0,e.length,e);Object.defineProperties(this,{original:{writable:!0,value:e},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:n},lastChunk:{writable:!0,value:n},lastSearchedChunk:{writable:!0,value:n},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:t.filename},indentExclusionRanges:{writable:!0,value:t.indentExclusionRanges},sourcemapLocations:{writable:!0,value:new q},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:Te(e)}}),this.byStart[0]=n,this.byEnd[e.length]=n};d.prototype.addSourcemapLocation=function(e){this.sourcemapLocations.add(e)},d.prototype.append=function(e){if(typeof e!="string")throw new TypeError("outro content must be a string");return this.outro+=e,this},d.prototype.appendLeft=function(e,t){if(typeof t!="string")throw new TypeError("inserted content must be a string");this._split(e);var n=this.byEnd[e];return n?n.appendLeft(t):this.intro+=t,this},d.prototype.appendRight=function(e,t){if(typeof t!="string")throw new TypeError("inserted content must be a string");this._split(e);var n=this.byStart[e];return n?n.appendRight(t):this.outro+=t,this},d.prototype.clone=function(){for(var e=new d(this.original,{filename:this.filename}),t=this.firstChunk,n=e.firstChunk=e.lastSearchedChunk=t.clone();t;){e.byStart[n.start]=n,e.byEnd[n.end]=n;var i=t.next,o=i&&i.clone();o&&(n.next=o,o.previous=n,n=o),t=i}return e.lastChunk=n,this.indentExclusionRanges&&(e.indentExclusionRanges=this.indentExclusionRanges.slice()),e.sourcemapLocations=new q(this.sourcemapLocations),e.intro=this.intro,e.outro=this.outro,e},d.prototype.generateDecodedMap=function(e){var t=this;e=e||{};var n=0,i=Object.keys(this.storedNames),o=new W(e.hires),s=ce(this.original);return this.intro&&o.advance(this.intro),this.firstChunk.eachNext(function(a){var l=s(a.start);a.intro.length&&o.advance(a.intro),a.edited?o.addEdit(n,a.content,l,a.storeName?i.indexOf(a.original):-1):o.addUneditedChunk(n,a,t.original,l,t.sourcemapLocations),a.outro.length&&o.advance(a.outro)}),{file:e.file?e.file.split(/[/\\]/).pop():null,sources:[e.source?Me(e.file||"",e.source):null],sourcesContent:e.includeContent?[this.original]:[null],names:i,mappings:o.raw}},d.prototype.generateMap=function(e){return new Y(this.generateDecodedMap(e))},d.prototype.getIndentString=function(){return this.indentStr===null?"	":this.indentStr},d.prototype.indent=function(e,t){var n=/^[^\r\n]/gm;if(qe(e)&&(t=e,e=void 0),e=e!==void 0?e:this.indentStr||"	",e==="")return this;t=t||{};var i={};if(t.exclude){var o=typeof t.exclude[0]=="number"?[t.exclude]:t.exclude;o.forEach(function(u){for(var p=u[0];p<u[1];p+=1)i[p]=!0})}var s=t.indentStart!==!1,a=function(u){return s?""+e+u:(s=!0,u)};this.intro=this.intro.replace(n,a);for(var l=0,h=this.firstChunk;h;){var f=h.end;if(h.edited)i[l]||(h.content=h.content.replace(n,a),h.content.length&&(s=h.content[h.content.length-1]===`
`));else for(l=h.start;l<f;){if(!i[l]){var c=this.original[l];c===`
`?s=!0:c!=="\r"&&s&&(s=!1,l===h.start||(this._splitChunk(h,l),h=h.next),h.prependRight(e))}l+=1}l=h.end,h=h.next}return this.outro=this.outro.replace(n,a),this},d.prototype.insert=function(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")},d.prototype.insertLeft=function(e,t){return A.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),A.insertLeft=!0),this.appendLeft(e,t)},d.prototype.insertRight=function(e,t){return A.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),A.insertRight=!0),this.prependRight(e,t)},d.prototype.move=function(e,t,n){if(n>=e&&n<=t)throw new Error("Cannot move a selection inside itself");this._split(e),this._split(t),this._split(n);var i=this.byStart[e],o=this.byEnd[t],s=i.previous,a=o.next,l=this.byStart[n];if(!l&&o===this.lastChunk)return this;var h=l?l.previous:this.lastChunk;return s&&(s.next=a),a&&(a.previous=s),h&&(h.next=i),l&&(l.previous=o),i.previous||(this.firstChunk=o.next),o.next||(this.lastChunk=i.previous,this.lastChunk.next=null),i.previous=h,o.next=l||null,h||(this.firstChunk=i),l||(this.lastChunk=o),this},d.prototype.overwrite=function(e,t,n,i){if(typeof n!="string")throw new TypeError("replacement content must be a string");for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;if(t>this.original.length)throw new Error("end is out of bounds");if(e===t)throw new Error("Cannot overwrite a zero-length range \u2013 use appendLeft or prependRight instead");this._split(e),this._split(t),i===!0&&(A.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),A.storeName=!0),i={storeName:!0});var o=i!==void 0?i.storeName:!1,s=i!==void 0?i.contentOnly:!1;if(o){var a=this.original.slice(e,t);Object.defineProperty(this.storedNames,a,{writable:!0,value:!0,enumerable:!0})}var l=this.byStart[e],h=this.byEnd[t];if(l){for(var f=l;f!==h;){if(f.next!==this.byStart[f.end])throw new Error("Cannot overwrite across a split point");f=f.next,f.edit("",!1)}l.edit(n,o,s)}else{var c=new v(e,t,"").edit(n,o);h.next=c,c.previous=h}return this},d.prototype.prepend=function(e){if(typeof e!="string")throw new TypeError("outro content must be a string");return this.intro=e+this.intro,this},d.prototype.prependLeft=function(e,t){if(typeof t!="string")throw new TypeError("inserted content must be a string");this._split(e);var n=this.byEnd[e];return n?n.prependLeft(t):this.intro=t+this.intro,this},d.prototype.prependRight=function(e,t){if(typeof t!="string")throw new TypeError("inserted content must be a string");this._split(e);var n=this.byStart[e];return n?n.prependRight(t):this.outro=t+this.outro,this},d.prototype.remove=function(e,t){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);for(var n=this.byStart[e];n;)n.intro="",n.outro="",n.edit(""),n=t>n.end?this.byStart[n.end]:null;return this},d.prototype.lastChar=function(){if(this.outro.length)return this.outro[this.outro.length-1];var e=this.lastChunk;do{if(e.outro.length)return e.outro[e.outro.length-1];if(e.content.length)return e.content[e.content.length-1];if(e.intro.length)return e.intro[e.intro.length-1]}while(e=e.previous);return this.intro.length?this.intro[this.intro.length-1]:""},d.prototype.lastLine=function(){var e=this.outro.lastIndexOf(R);if(e!==-1)return this.outro.substr(e+1);var t=this.outro,n=this.lastChunk;do{if(n.outro.length>0){if(e=n.outro.lastIndexOf(R),e!==-1)return n.outro.substr(e+1)+t;t=n.outro+t}if(n.content.length>0){if(e=n.content.lastIndexOf(R),e!==-1)return n.content.substr(e+1)+t;t=n.content+t}if(n.intro.length>0){if(e=n.intro.lastIndexOf(R),e!==-1)return n.intro.substr(e+1)+t;t=n.intro+t}}while(n=n.previous);return e=this.intro.lastIndexOf(R),e!==-1?this.intro.substr(e+1)+t:this.intro+t},d.prototype.slice=function(e,t){for(e===void 0&&(e=0),t===void 0&&(t=this.original.length);e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;for(var n="",i=this.firstChunk;i&&(i.start>e||i.end<=e);){if(i.start<t&&i.end>=t)return n;i=i.next}if(i&&i.edited&&i.start!==e)throw new Error("Cannot use replaced character "+e+" as slice start anchor.");for(var o=i;i;){i.intro&&(o!==i||i.start===e)&&(n+=i.intro);var s=i.start<t&&i.end>=t;if(s&&i.edited&&i.end!==t)throw new Error("Cannot use replaced character "+t+" as slice end anchor.");var a=o===i?e-i.start:0,l=s?i.content.length+t-i.end:i.content.length;if(n+=i.content.slice(a,l),i.outro&&(!s||i.end===t)&&(n+=i.outro),s)break;i=i.next}return n},d.prototype.snip=function(e,t){var n=this.clone();return n.remove(0,e),n.remove(t,n.original.length),n},d.prototype._split=function(e){if(!(this.byStart[e]||this.byEnd[e]))for(var t=this.lastSearchedChunk,n=e>t.end;t;){if(t.contains(e))return this._splitChunk(t,e);t=n?this.byStart[t.end]:this.byEnd[t.start]}},d.prototype._splitChunk=function(e,t){if(e.edited&&e.content.length){var n=ce(this.original)(t);throw new Error("Cannot split a chunk that has already been edited ("+n.line+":"+n.column+' \u2013 "'+e.original+'")')}var i=e.split(t);return this.byEnd[t]=e,this.byStart[t]=i,this.byEnd[i.end]=i,e===this.lastChunk&&(this.lastChunk=i),this.lastSearchedChunk=e,!0},d.prototype.toString=function(){for(var e=this.intro,t=this.firstChunk;t;)e+=t.toString(),t=t.next;return e+this.outro},d.prototype.isEmpty=function(){var e=this.firstChunk;do if(e.intro.length&&e.intro.trim()||e.content.length&&e.content.trim()||e.outro.length&&e.outro.trim())return!1;while(e=e.next);return!0},d.prototype.length=function(){var e=this.firstChunk,t=0;do t+=e.intro.length+e.content.length+e.outro.length;while(e=e.next);return t},d.prototype.trimLines=function(){return this.trim("[\\r\\n]")},d.prototype.trim=function(e){return this.trimStart(e).trimEnd(e)},d.prototype.trimEndAborted=function(e){var t=new RegExp((e||"\\s")+"+$");if(this.outro=this.outro.replace(t,""),this.outro.length)return!0;var n=this.lastChunk;do{var i=n.end,o=n.trimEnd(t);if(n.end!==i&&(this.lastChunk===n&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),o)return!0;n=n.previous}while(n);return!1},d.prototype.trimEnd=function(e){return this.trimEndAborted(e),this},d.prototype.trimStartAborted=function(e){var t=new RegExp("^"+(e||"\\s")+"+");if(this.intro=this.intro.replace(t,""),this.intro.length)return!0;var n=this.firstChunk;do{var i=n.end,o=n.trimStart(t);if(n.end!==i&&(n===this.lastChunk&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),o)return!0;n=n.next}while(n);return!1},d.prototype.trimStart=function(e){return this.trimStartAborted(e),this};function he(r,e=r.charAt(0)){return[e,`${e}t`,`${e}r`,`${e}b`,`${e}l`,`${e}x`,`${e}y`,r,`${r}-top`,`${r}-right`,`${r}-bottom`,`${r}-left`,`${r}-inline`,`${r}-inline-start`,`${r}-inline-end`,`${r}-block`,`${r}-block-start`,`${r}-block-end`]}const We={color:["bg","color","accent-color","caret-color","column-rule-color","text-decoration-color","text-emphasis-color","outline-color","background-color","border-color","border-top-color","border-right-color","border-bottom-color","border-left-color","border-inline-color","border-inline-start-color","border-inline-end-color","border-block-color","border-block-start-color","border-block-end-color"],space:["tx","ty","gap","row-gap","column-gap","grid-gap","grid-row-gap","grid-column-gap",...he("margin"),...he("padding"),"top","right","bottom","left","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start"],radius:["br","btlr","btrr","bblr","bbrr","border-radius","border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius"],easing:["animation","animation-timing-function","transition","transition-timing-function"],font:["f","font","font-family"],"font-size":["fs","font-size"],"font-weight":["fw","weight","font-weight"],"font-leading":["lh","line-height","leading"],"font-tracking":["ls","letter-spacing","tracking"]},fe=new Map([["border",["color","border-size","space"]],["border-inline",["color","border-size","space"]],["border-inline-start",["color","border-size","space"]],["border-inline-end",["color","border-size","space"]],["border-block",["color","border-size","space"]],["border-block-start",["color","border-size","space"]],["border-block-end",["color","border-size","space"]],["background",["gradient","color"]],["bg",["gradient","color"]],["box-shadow",["shadow","color","space"]],["shadow",["shadow","color","space"]],["size",["size","space"]],["inline-size",["size","space"]],["block-size",["size","space"]],["width",["width","size","space"]],["min-width",["width","size","space"]],["max-width",["width","size","space"]],["height",["height","size","space"]],["min-height",["height","size","space"]],["max-height",["height","size","space"]]]),L=new Map;function De(r,e,t){if(e.charAt(0)==="-"&&e.charAt(1)==="-")return;const n=`${r}:${e}`;if(r.charAt(0)==="-"&&r.charAt(1)==="-"&&(r=r.slice(2)),L.has(n))return L.get(n);if(fe.has(r)){const i=fe.get(r);for(const[o,s]of Object.entries(t.scales).sort(([a],[l])=>{const h=i.indexOf(a),f=i.indexOf(l);return h>f?1:h<f?-1:0}))if(!!i.includes(o)&&e in s)return L.set(n,o),o}else for(const[i,o]of Object.entries(We))for(const s of o)if(r===s)return L.set(n,i),i;L.set(n,void 0)}function k(r){return`--${r.replace(/[\. ]/g,"-")}`}function Fe(r){let e=":root {";const t=[];for(const n of Object.values(r)){const i=k(n.$path);if(n.$scale==="media"){t.push(i),e+=`
  ${i}: ${n.value};`;continue}const o=Be(n);o!=null&&(n.description&&(e+=`
  /* ${n.description} */`),e+=`
  ${i}: ${o};`,n.type==="color"&&(e+=`
  ${i}-rgb: ${pe(o)};`))}return e+=`
  --tokencss: 1;`,t.length>0&&(e+=`
  --tokencss-media: ${t.map(n=>`var(${n})`).join(", ")};`),e+=`
}`,e}function Be(r){switch(r.type){case"string":return`"${r.value}"`;case"number":return`${r.value}`;case"null":return"";case"boolean":return`${r.value}`;case"color":return`${r.value}`;case"dimension":return`${r.value}`;case"cubic-bezier":return`cubic-bezier(${r.value.join(", ")})`;case"font":return r.value.map(e=>e.includes(" ")?`"${e}"`:e).join(", ");case"shadow":return Array.isArray(r.value)?r.value.map(e=>de(e)).join(", "):de(r.value)}}function de(r){var i;let e="";for(const o of["offset-x","offset-y","blur","spread"]){const s=r[o];s.$path?e+=`var(${k(s.$path)})`:e+=` ${s}`}const t=r.color;e+=" rgba(",t.$path?e+=`var(${k(t.$path)}-rgb)`:e+=`${pe(t)}`,e+=", ";const n=(i=r.opacity)!=null?i:"1";return n.$path?e+=`var(${k(n.$path)})`:e+=`${n}`,e+=")",e.trim()}function pe(r){if(typeof r!="string")return;r=r.slice(1);let e="0",t="0",n="0",i="1";switch(r.length){case 3:{e=r[0]+r[0],t=r[1]+r[1],n=r[2]+r[2];break}case 4:{e=r[0]+r[0],t=r[1]+r[1],n=r[2]+r[2],i=r[3]+r[3];break}case 6:{e=r[0]+r[1],t=r[2]+r[3],n=r[4]+r[5];break}case 8:{e=r[0]+r[1],t=r[2]+r[3],n=r[4]+r[5],i=r[6]+r[7];break}}return i!=="1"?[e,t,n,i].map(o=>Number.parseInt(o,16)).join(", "):[e,t,n].map(o=>Number.parseInt(o,16)).join(", ")}function D(r,e,t,n,i){for(e=e.split?e.split("."):e,n=0;n<e.length;n++)r=r?r[e[n]]:i;return r===i?t:r}function H(r,e=[]){const t={};return Object.keys(r).forEach(n=>{const i=r[n];n==="value"?t[e.join(".")]=i:typeof i=="object"&&i!==null&&!Array.isArray(i)&&Object.assign(t,H(i,[...e,n]))}),t}function Z(r){const e={},t=Object.keys(H(r));for(const n of t){const i=N(n,r);typeof i.value=="object"&&(e[i.$path]=i),e[i.$path]=i}return e}function ee(r){const e={},t=Object.keys(H(r));for(const n of t){const i=N(n,r),o=i.$path.split(".");if(i.$scale){let s;o[0]===i.$scale?s=o.slice(1).join("."):s=o.join("."),typeof e[i.$scale]=="object"?e[i.$scale][s]=i:e[i.$scale]={[s]:i}}}return e}const ge=new Set(["color","space","size","width","height","radius","shadow","font","font-size","font-weight","line-height","letter-spacing","easing","media","unknown"]);function Ve(r,e){if(r.type)return r;let t=r.$path.split(".");for(;!r.type&&(t=t.slice(0,-1),t.length!==0);)r.type=D(e,`${t.join(".")}.type`);if(r.type)return r;switch(typeof r.value){case"string":case"number":case"boolean":return r.type=typeof r.value,r;default:return r.value?Array.isArray(r.value)?(r.type="array",r):(r.type="object",r):(r.type="null",r)}}function Qe(r,e){const t=N(r.type.slice(1,-1),e);function n(i){for(const[o,s]of Object.entries(t.value)){const a=i[o];let l={value:a};if(Object.assign(l,s),typeof a=="string"&&a.startsWith("{")&&a.endsWith("}")){const h=N(a.slice(1,-1),e);h&&Object.assign(l,h)}i[o]=l}return i}return Array.isArray(r.value)?r.value=r.value.map(i=>n(i)):r.value=n(r.value),r}function Je(r,e){var n;if(r.$scale)return r;if(r.type&&ge.has(r.type))return r.$scale=r.type,r;let t=r.$path.split(".");if(ge.has(t[0]))return r.$scale=t[0],r;if(typeof r.extensions=="object"&&r.extensions["com.tokencss.scale"])return r.$scale=r.extensions["com.tokencss.scale"],r;for(;!r.$scale&&(t=t.slice(0,-1),t.length!==0);)r.$scale=(n=D(e,`${t.join(".")}.extensions`))==null?void 0:n["com.tokencss.scale"];return r.$scale||(r.$scale="unknown"),r}function Ke(r,e){if(r.extensions)return r;let t=r.$path.split(".");for(;!r.extensions&&(t=t.slice(0,-1),t.length!==0);)r.extensions=D(e,`${t.join(".")}.extensions`);return r}function N(r,e){let t=D(e,r);if(!!t)return t.$path||(t.$path=r),typeof t.value=="string"&&t.value.startsWith("{")&&t.value.endsWith("}")?(t=N(t.value.slice(1,-1),e),t.$alias=t.$path,t.$path=r,t):(Ke(t,e),Ve(t,e),typeof t.type=="string"&&t.type.startsWith("{")&&t.type.endsWith("}")&&Qe(t,e),Je(t,e),t)}const Ge=O.promisify(C.stat),Xe=O.promisify(C.readdir);async function Ye(r,e){let t=b.resolve(".",r),n;for((await Ge(t)).isDirectory()||(t=b.dirname(t));;){if(n=await e(t,await Xe(t)),n)return b.resolve(t,n);if(t=b.dirname(n=t),n===t)break}}var He=function(e){return Ze(e)&&!et(e)};function Ze(r){return!!r&&typeof r=="object"}function et(r){var e=Object.prototype.toString.call(r);return e==="[object RegExp]"||e==="[object Date]"||nt(r)}var tt=typeof Symbol=="function"&&Symbol.for,rt=tt?Symbol.for("react.element"):60103;function nt(r){return r.$$typeof===rt}function it(r){return Array.isArray(r)?[]:{}}function P(r,e){return e.clone!==!1&&e.isMergeableObject(r)?$(it(r),r,e):r}function st(r,e,t){return r.concat(e).map(function(n){return P(n,t)})}function ot(r,e){if(!e.customMerge)return $;var t=e.customMerge(r);return typeof t=="function"?t:$}function at(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(e){return r.propertyIsEnumerable(e)}):[]}function ve(r){return Object.keys(r).concat(at(r))}function ye(r,e){try{return e in r}catch(t){return!1}}function ut(r,e){return ye(r,e)&&!(Object.hasOwnProperty.call(r,e)&&Object.propertyIsEnumerable.call(r,e))}function lt(r,e,t){var n={};return t.isMergeableObject(r)&&ve(r).forEach(function(i){n[i]=P(r[i],t)}),ve(e).forEach(function(i){ut(r,i)||(ye(r,i)&&t.isMergeableObject(e[i])?n[i]=ot(i,t)(r[i],e[i],t):n[i]=P(e[i],t))}),n}function $(r,e,t){t=t||{},t.arrayMerge=t.arrayMerge||st,t.isMergeableObject=t.isMergeableObject||He,t.cloneUnlessOtherwiseSpecified=P;var n=Array.isArray(e),i=Array.isArray(r),o=n===i;return o?n?t.arrayMerge(r,e,t):lt(r,e,t):P(e,t)}$.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,i){return $(n,i,t)},{})};var ct=$,ht=ct;let ft=se.createRequire(typeof document=="undefined"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index-f5e3752e.js",document.baseURI).href);async function dt(r,{middleware:e=[]}={}){return await Promise.all(e.map(t=>t.register(r))),new Promise((t,n)=>{try{let i=ft(r);t(i)}catch(i){if(i.code==="ERR_REQUIRE_ESM"){const o=Ee.pathToFileURL(r).toString();return function(s){return Promise.resolve().then(function(){return Ae(require(s))})}(o).then(s=>t(s))}n(i)}})}class pt extends Error{constructor(e={}){super(e.message),this.name="ProloadError",this.code=e.code||"ERR_PROLOAD_INVALID",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}function gt(r,e,t){if(!r)throw e instanceof Error?e:new pt({message:e,code:t})}var te=gt;const vt=O.promisify(C.stat),yt=O.promisify(C.readdir),bt=O.promisify(C.readFile),re=se.createRequire(typeof document=="undefined"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index-f5e3752e.js",document.baseURI).href);let ne=ht;const mt=["js","cjs","mjs"],wt=["[name].config"],be=r=>{const e=m.plugins.filter(s=>Array.isArray(s.extensions)),t=m.plugins.filter(s=>Array.isArray(s.fileNames)),n=[...mt].concat(...e.map(s=>s.extensions));return[...wt].concat(...t.map(s=>s.fileNames)).map(s=>s.replace("[name]",r)).reduce((s,a)=>[...s].concat(...n.map(l=>`${a}${l?"."+l.replace(/^\./,""):""}`)),[])},xt=r=>r!=null&&typeof r=="object"&&Array.isArray(r)===!1,me=r=>{let e=m.plugins.filter(n=>typeof n.register!="undefined"),t=m.plugins.filter(n=>typeof n.transform!="undefined");return dt(r,{middleware:e}).then(async n=>Promise.all(t.map(i=>Promise.resolve(i.transform(n)).then(o=>{o&&(n=o)}))).then(()=>n))};async function Ct(r,{filePath:e,extension:t}){let n;if(b.extname(t)===""){(t.startsWith("./")||t.startsWith("../"))&&(n=re.resolve(`${t}${b.extname(e)}`,{paths:[b.dirname(e)]}));const o=be(r);for(const s of o)try{n=re.resolve(`${t}/${s}`,{paths:[b.dirname(e)]});break}catch(a){}}n=n||re.resolve(t,{paths:[b.dirname(e)]});const i=await me(n);return{filePath:n,value:i}}async function we(r,{filePath:e,value:t,context:n},i={}){let o=typeof t=="function"?await t(n):t;if(Array.isArray(o))return o;if(te(xt(o),`${r} configuration expects an "object" but encountered ${o}`),i=ne(i,o),!("extends"in o))return i;te(Array.isArray(o.extends),`${r} "extends" must be an array`);const s=await Promise.all(o.extends.map(a=>Ct(r,{filePath:e,extension:a}).then(l=>we(r,{...l,context:n},i))));for(const a of s)i=ne(i,a);return delete i.extends,i}async function m(r,e={}){const t=be(r),{context:n,accept:i}=e,o=e.cwd||process.cwd();let s=!0;typeof e.mustExist!="undefined"&&(s=e.mustExist),typeof e.merge=="function"&&(ne=e.merge);let a;if(typeof e.filePath=="string"){const f=e.filePath.startsWith(".")?b.resolve(e.filePath,o):e.filePath;C.existsSync(f)&&(a=f)}else a=await Ye(o,async(f,c)=>{if(i){for(const u of c)if(i(u,{directory:f})===!0)return u}for(const u of t)if(c.includes(u))return u;if(c.includes("config")){let u=b.join(f,"config"),p=await vt(u),y=[];if(p.isDirectory()){y=await yt(u);for(const w of t)if(y.includes(w))return b.join("config",w)}}if(c.includes("package.json")){let u=b.join(f,"package.json");if((await bt(u).then(y=>JSON.parse(y.toString())))[r])return"package.json"}});if(s)te(!!a,`Unable to resolve a ${r} configuration`,"ERR_PROLOAD_NOT_FOUND");else if(!a)return;let l=await me(a);a.endsWith("package.json")&&(l=l[r]);const h=await we(r,{filePath:a,value:l,context:n});return{filePath:a,raw:l,value:h}}const Et=[{name:"@proload/extract-default",transform(r){return r.default&&Object.keys(r).length===1?r.default:r}}];m.plugins=Et,m.use=r=>{m.plugins=[...m.plugins,...r]},m.use([{name:"@proload/plugin-json",extensions:["json","jsonc"]}]);async function xe({cwd:r}){const e=await m("token",{cwd:r,mustExist:!1,accept(t){return t==="token.config.json"}});return e==null?void 0:e.value}function At(r,e,t){const n=[];function i(o,s){if(Array.isArray(o))return o.map(a=>i(a,s));switch(o.type){case"function":return i(o.nodes,o);case"word":{const a=De(e,o.value,{scales:t});if(a&&t[a]){const l=t[a][o.value],h=l==null?void 0:l.$path;if(h){let f=k(h);(s==null?void 0:s.type)==="function"&&(s==null?void 0:s.value.startsWith("rgb"))&&(f+="-rgb"),n.push(Object.assign(o,{token:f,scale:a}))}}return}}}return i(r),n}const Ce=({cwd:r=process.cwd(),config:e,onToken:t}={})=>{let n=e?null:xe({cwd:r}),i=e?ee(e):void 0,o=e?Z(e):void 0;return{postcssPlugin:"@tokencss/postcss",async AtRule(a){if(n&&!i&&(await n.then(l=>{i=ee(l),o=Z(l)}),n=null),a.name==="inject"){let l=a.params.replace(/^['"]/,"").replace(/['"]$/,"");if(!l.startsWith("tokencss:"))return;switch(l=l.slice(9),l){case"base":{const h=Fe(o),{nodes:f}=ie.parse(h.trim());a.replaceWith(...f);return}case"container":{const h=Object.values(i.media).filter(({value:u})=>u.includes("(min-width:")).map(({value:u})=>u);let f="";f+=`
.container {`,f+=`
  width: calc(100% - calc(var(--container-margin-inline, 0.75rem) * 2));`,f+=`
  max-width: calc(var(--container-max-width, 100%) - calc(var(--container-margin-inline, 0.75rem) * 2));`,f+=`
  padding-right: var(--container-padding-inline, 0);`,f+=`
  padding-left: var(--container-padding-inline, 0);`,f+=`
  margin-right: auto;`,f+=`
  margin-left: auto;`,f+=`
}`;for(const u of h){const p=u.replace(/^.*\(min-width:\s*/,"").replace(/\)\s*$/,"");f+=`
@media ${u} {`,f+=`
  :root { --container-max-width: ${p}; }`,f+=`
}`}const{nodes:c}=ie.parse(f.trim());a.replaceWith(...c);return}}return}if(a.name==="media"){if(!i.media)return;let l=a.params;if(!(l.startsWith("(")&&l.endsWith(")"))||(l=l.slice(1,-1),!i.media[l]))return;a.assign({params:i.media[l].value})}},async Declaration(a){n&&!i&&(await n.then(p=>{i=ee(p),o=Z(p)}),n=null);const{prop:l,value:h}=a,{nodes:f}=Pe(h),c=new d(h),u=At(f,l,i);for(const p of u){if(t){const y=a.rangeBy({word:p.value,index:p.sourceIndex,endIndex:p.sourceEndIndex});t({value:p.value,scale:p.scale,range:y})}c.overwrite(p.sourceIndex,p.sourceEndIndex,`var(${p.token})`)}a.assign({value:c.toString()})}}};Ce.postcss=!0;var $t=Ce;exports.default=$t,exports.loadConfig=xe;
